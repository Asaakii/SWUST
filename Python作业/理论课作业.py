from turtle import *
import time
from random import random, randint

#太阳
def sun() :

    ht()
    pu()
    setx(-300)
    sety(300)
    pd()
    dot(80,"orange")
#小屋
def house():
    pensize(2)
    pencolor("#cf586c")
    fillcolor("#cf586c")    #Rhouse
    pu()
    goto(200,0)
    pd()
    begin_fill()
    fd(200)
    seth(90)
    fd(200)
    left(90)
    fd(200)
    end_fill()

    pu()    #top

    goto(410, 200)
    seth(90)
    pencolor("#5e5e78")
    fillcolor("#5e5e78")
    pd()
    begin_fill()
    fd(90)
    left(90)
    fd(300)
    left(90)
    fd(90)
    end_fill()

    pencolor("white")
    goto(410, 200)
    seth(90)
    fillcolor("white") #liang
    pd()
    begin_fill()
    fd(20)
    left(90)
    fd(300)
    left(90)
    fd(20)
    end_fill()

    #door
    pu()

    pencolor("#5e5e78")
    goto(230,0)
    seth(0)
    fillcolor("#5e5e78")
    pd()
    begin_fill()
    fd(70)
    left(90)
    fd(150)
    left(90)
    fd(70)
    end_fill()

    pu()

    pencolor("#72b541") #green
    goto(225, 0)
    seth(0)
    fillcolor("#72b541")
    pd()
    begin_fill()
    fd(80)
    left(90)
    fd(30)
    left(90)
    fd(80)
    end_fill()

    pu()
    pencolor("#d4d0c6")  # hui
    goto(220, 0)
    seth(0)
    fillcolor("#d4d0c6")
    pd()
    begin_fill()
    fd(90)
    left(90)
    fd(20)
    left(90)
    fd(90)
    end_fill()

    pu()
    goto(285,95)    #position
    pencolor("#e5ebf3") #handle
    fillcolor("#e5ebf3")
    pd()
    begin_fill()
    circle(5)
    end_fill()

    #windows
    pu()
    pensize(6)
    pencolor("white")  # shense
    goto(320, 80)
    seth(0)
    fillcolor("#a3d1d5")
    pd()
    begin_fill()
    fd(60)
    left(90)
    fd(80)
    left(90)
    fd(60)
    left(90)
    fd(80)
    end_fill()

    pu()
    pensize(6)
    pencolor("white")
    goto(320, 80)
    seth(0)
    fillcolor("#c6eceb")#qianse
    pd()
    begin_fill()
    fd(60)
    left(90)
    fd(40)
    left(90)
    fd(60)
    left(90)
    fd(40)
    end_fill()

    #one
    pu()
    goto(340, 135)
    pensize(4)
    pencolor("white")
    pd()
    seth(45)
    fd(14.1)
    #two
    pu()
    goto(350, 135)
    pensize(4)
    pencolor("white")
    pd()
    seth(45)
    fd(14.1)

    pensize(2)
    pu()
    goto(310,70)
    pencolor("#d4d0c6")
    seth(0)
    fillcolor("#d4d0c6")  #yangtai
    pd()
    begin_fill()
    fd(80)
    left(90)
    fd(20)
    left(90)
    fd(80)
    left(90)
    fd(20)
    end_fill()

    pensize(4)
    pu()
    goto(320, 75)
    pencolor("#c5c1b6")
    seth(0)
    fillcolor("#c5c1b6")  # 阴影
    pd()
    begin_fill()
    fd(60)
    left(90)
    fd(8)
    left(90)
    fd(60)
    left(90)
    fd(8)
    end_fill()
    #plant1
    pu()
    pensize(1)
    goto(346,90)
    pd()
    pencolor("#77c427")
    seth(90)
    fillcolor("#77c427")
    begin_fill()
    circle(13,180)
    end_fill()
    #plant2
    pu()
    goto(382, 90)
    pd()
    pencolor("#77c427")
    seth(90)
    fillcolor("#77c427")
    begin_fill()
    circle(13, 180)
    end_fill()


    pu()    #Lhouse
    home()
    pd()
    pencolor("#e36872")
    fillcolor("#e36872")
    begin_fill()
    goto(200, 0)
    left(90)
    goto(200, 200)
    goto(100, 283)
    goto(0, 200)
    goto(0, 0)
    end_fill()

    # 房顶
    pu()
    goto(0, 200)
    pencolor("white")
    fillcolor("white")
    begin_fill()
    pensize(1)
    pd()
    goto(100, 283)
    goto(210, 190)
    seth(0)
    left(45)
    fd(20)
    goto(100, 311)
    seth(0)
    left(-140)
    fd(144 + 19.8)
    left(95)
    fd(21)
    end_fill()

    pencolor("#9fd5d7")
    pensize(6)
    fillcolor("#9fd5d7")  # 玻璃蓝
    begin_fill()
    pu()
    goto(25, 50)
    pd()
    seth(0)
    fd(150)
    left(90)
    fd(100)
    left(90)
    fd(150)
    left(90)
    fd(100)
    end_fill()


    pu()
    pensize(1)
    goto(160, 135)
    seth(-90)
    pd()
    pencolor("#8bc5c5")
    fillcolor("#8bc5c5")
    begin_fill()
    fd(50)
    left(90)
    fd(4)
    left(90)
    fd(50)
    left(90)
    fd(4)
    end_fill()

    fillcolor("#8bc5c5")
    begin_fill()
    pu()
    goto(162,89)
    dot(10,"#8bc5c5")

    pencolor("#8bc5c5")#LW shense chuanglian
    pensize(2)
    fillcolor("#8bc5c5")
    pu()
    goto(30,135)
    seth(0)
    pd()
    begin_fill()
    circle(8.6,-25)

    for i in range (8):
        seth(-90)
        circle(8.6,180)
    seth(-90)
    circle(8.6,90)
    seth(90)
    fd(20)
    left(90)
    fd(148)
    left(90)
    fd(20)
    end_fill()

    pencolor("white") #白边框
    pensize(6)
    pu()
    goto(25, 50)
    pd()
    seth(0)
    fd(150)
    left(90)
    fd(100)
    left(90)
    fd(150)
    left(90)
    fd(100)

    pensize(5)
    pencolor("white")
    pu()
    goto(70, 150)
    pd()
    fd(100)
    pu()
    goto(130, 150)
    pd()
    fd(100)
    seth(0)
    pu()
    goto(25, 100)
    pd()
    fd(45)
    pu()
    fd(60)
    pd()
    fd(45)

    # 圆形
    seth(0)
    pensize(6)
    pu()
    goto(100, 190)
    pd()
    fillcolor("#9fd5d7")  # 窗户玻璃蓝色
    begin_fill()
    circle(30)
    end_fill()
    pensize(4)
    pu()
    goto(70, 220)
    pd()
    fd(60)
    seth(-90)
    pu()
    goto(100, 250)
    pd()
    fd(60)

    pu()
    seth(45)
    goto(90, 90)
    pd()
    fd(20)
    pu()
    seth(45)
    goto(105, 90)
    pd()

    fd(20)
#左阴影
def 阴影L(): #L房子红阴影
    pencolor("#d4636a")
    fillcolor("#d4636a")
    begin_fill()
    seth(0)
    fd(20)
    left(90)
    fd(10)
    left(90)
    fd(20)
    left(90)
    fd(10)
    end_fill()
#右阴影
def 阴影R(): #R房子红阴影
    pencolor("#bc5969")
    fillcolor("#bc5969")
    begin_fill()
    seth(0)
    fd(20)
    left(90)
    fd(10)
    left(90)
    fd(20)
    left(10)
    end_fill()
    pu()
#阴影
def shadow():
    pu()
    goto(30, 10)
    pd()
    阴影L()

    pu()
    pu()
    goto(20, 25)
    pd()
    阴影L()

    pu()
    goto(130, 160)
    pd()
    阴影L()

    pu()
    goto(160, 160)
    pd()
    阴影L()

    pu()
    goto(145, 175)
    pd()
    阴影L()

    pu()
    goto(360, 20)
    pd()
    阴影R()

    pu()
    goto(275, 160)
    pd()
    阴影R()

    pu()
    goto(265, 175)
    pd()
    阴影R()

    pu()
    goto(290, 175)
    pd()
    阴影R()
#雪花
def sonwfall():
    for i in range(15):
        fd(20)
        time.sleep(0.01)
#小河
def river():
    pu()
    pensize(2)
    pencolor("#455fb4")
    fillcolor("#455fb4")
    begin_fill()
    goto(-110, -400)
    pd()
    for i in range(63):
        seth(120 + i/4)
        fd(10)
    seth(-90)
    fd(500)
    goto(-110, -400)
    end_fill()
    pu()
    goto(0, 0)
    pd()
#标牌
def biaopai():
    ht()
    pencolor("#deb488")
    fillcolor("#deb488")
    begin_fill()
    pu()
    goto(-40, -50)
    pd()
    seth(90)
    fd(40)
    lt(90)
    fd(7)
    lt(90)
    fd(40)
    lt(90)
    fd(7)
    end_fill()


    pencolor("#deb488")
    fillcolor("#deb488")
    begin_fill()
    pu()
    goto(-65,-35)
    pd()
    seth(0)
    fd(40)
    seth(45)
    fd(14.1)
    seth(135)
    fd(14.1)
    seth(180)
    fd(40)
    lt(90)
    fd(20)

    end_fill()
    pu()
    goto(-60,-30)

    pd()
    pencolor("white")
    write("雪中小屋",font=("Arial", 6))
#小路
def road():
     pu()
     goto(500,-100)
     pd()
     pencolor("#e6d79e")
     fillcolor("#e6d79e")
     begin_fill()
     seth(-90)
     fd(70)
     rt(90)
     fd(350)
     rt(90)
     fd(70)
     rt(90)
     fd(350)
     end_fill()
#小石子
def store(x,y):
    pu()
    goto(x,y)
    pd()
    dot(randint(5,8),"#635a51")
#石板
def shiban(x,y):
    pu()
    pensize(2)
    pencolor("#b2aa9d")
    fillcolor("#b2aa9d")
    goto(x, y)
    pd()
    seth(-90)
    begin_fill()
    fd(50)
    lt(90)
    fd(20)
    lt(90)
    fd(50)
    lt(90)
    fd(20)
    end_fill()


night =Screen()
width, height = 1000, 800
night.setup(width, height)
night.title("雪中小屋")
bgcolor("lightsteelblue")
ht()
speed(0)

house()
pensize(1)
shadow()
sun()
river()
biaopai()
road()
shiban(200,-110)
shiban(250,-110)
shiban(300,-110)
shiban(400,-110)
shiban(450,-110)

store(320,-110)
store(340,-160)
store(160,-130)
store(443,-147)
store(269,-138)
store(228,-166)
store(190,-155)
store(420,-141)
store(356,-133)
store(200,-168)
store(399,-127)
store(234,-146)
store(432,-117)
store(199,-118)

tracer(1)
delay(0)
y = 290
pensize(10)
pencolor("white")
seth(180)

ht()
t=Turtle(visible=False, shape='circle') #False
t.pencolor("white")
t.fillcolor("white")
t.pu()

snowflakes = []
for i in range(200):
    snowflake = t.clone()
    s = random() #0到1   /3
    snowflake.shapesize(s, s) #雪花半径
    snowflake.speed(int(s * 10)) #下路速度和雪花大小有关

    snowflake.setx(randint(-height / 2, height / 2))
    snowflake.sety( height / 2)

    snowflake.showturtle()
    snowflakes.append(snowflake)
    snowflake.ht()

while True:
    for snowflake in snowflakes:
        snowflake.setx(snowflake.xcor() - 4 * snowflake.speed())
        snowflake.sety(snowflake.ycor() - 1 * snowflake.speed())
        if y >278 :
            for i in range(4):
                pu()
                goto(407, y)
                pd()
                sonwfall()
                y = y - 3

        if snowflake.xcor() < -width / 2:
            snowflake.hideturtle()
            snowflake.setx(width / 2 + randint(1, width))
            snowflake.sety(randint(-height / 2, height / 2))
            snowflake.showturtle()
