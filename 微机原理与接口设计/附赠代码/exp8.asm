;行: CS1(600H), CS2(640H)  列: CS3(680H), CS4(6C0H)
ROW1		EQU 0600H			;端口IOY0
ROW2		EQU 0640H			;端口IOY1
COL1		EQU 0680H			;端口IOY2
COL2		EQU 06C0H			;端口IOY3

STACK1	SEGMENT STACK
		DW 256 DUP(?)
STACK1	ENDS

DATA SEGMENT
;李   CC0EE
DB 000H,000H,000H,004H,080H,004H,0C8H,004H
DB 068H,004H,0B8H,004H,098H,024H,0FFH,066H
DB 07FH,07FH,0DCH,03BH,0F4H,002H,024H,002H
DB 064H,002H,040H,002H,040H,002H,040H,000H

;若   CC8F4
DB 000H,020H,080H,020H,088H,030H,088H,018H
DB 088H,00CH,09EH,01EH,09EH,03FH,0E8H,025H
DB 0ECH,024H,05CH,026H,05FH,032H,047H,01EH
DB 044H,00EH,044H,000H,040H,000H,040H,000H

;昊   CEABB
DB 000H,000H,000H,040H,000H,042H,002H,062H
DB 09EH,032H,09EH,01AH,097H,00FH,0D5H,007H
DB 055H,00DH,055H,019H,05FH,031H,00FH,031H
DB 000H,061H,000H,060H,000H,040H,000H,040H
DATA ENDS
		
CODE	SEGMENT
		ASSUME	CS:CODE, DS:DATA

START:	MOV AX, DATA
		MOV DS, AX

		MOV DX, ROW1	;0~7行清0
		MOV AL, 00H
		OUT DX, AL

		MOV DX, ROW2	;8~15行清0
		OUT DX, AL
		MOV AL, 0ffH	;0～7列清0
		MOV DX, COL1
		OUT DX, AL

		MOV DX, COL2	;8～15列清0
		OUT DX, AL

BG0:	MOV AX, 160


BG1:	CALL DISP	;显示

		SUB SI, 2	;下一行，一共16行

		DEC AX
		JZ BG0	;到了160次就再来160次
		JMP BG1	;没到就显示

;======显示汉字子程序======
;目的：行1列0 -> LED亮
DISP:	MOV CX, 000FH	;整体循环16次
		PUSH AX		

ML0:	PUSH CX
		MOV BL, 0FEH	;~(0000 0001),最后一行
		MOV CX, 0008H	;上8行

ML1:	MOV DX, COL1			;控制0--7行，清0
		MOV AL, 0FFH
		OUT DX, AL

		MOV AL, [SI]	;第一个字第0～7列


		MOV DX, ROW1			;0--7行
		OUT DX, AL	;送列

		INC SI	;准备8～15列

		MOV AL, [SI]


		MOV DX, ROW2			;8--15行
		OUT DX, AL

		INC SI	;准备之后左下角0～7列

		MOV DX, COL1			;控制0--7列

		MOV AL, BL	;0000 0001,前8行的第1行亮
		OUT DX, AL

		ROL BL, 1	;0000 0010
		
		CALL DELAY

		LOOP ML1	;前8行8次

		MOV DX, COL1	;前8列灭
		MOV AL, 0FFH
		OUT DX, AL

		MOV CX, 0008H	;重置内部计数

ML2:	MOV DX, COL2			;控制8--15列
		MOV AL, 0FFH
		OUT DX, AL
		MOV AL, [SI]

		MOV DX, ROW1			;0--7行
		OUT DX, AL
		INC SI
		MOV AL, [SI]

		MOV DX, ROW2			;8--15行
		OUT DX, AL
		INC SI
		MOV DX, COL2			;控制8--15列
		MOV AL, BL
		OUT DX, AL
		ROL BL, 1
		CALL DELAY
		LOOP ML2
		MOV DX, COL2
		MOV AL, 0FFH
		OUT DX, AL

		SUB SI, 32	;回到最初的起点
		POP CX	;总共16行，大循环16次
		LOOP ML0

		POP AX
		RET	
DELAY:	PUSH CX				;延时子程序
		MOV CX, 0100H
DL1:	PUSH AX
		POP AX
		LOOP DL1
		POP CX
		RET		
		
CODE	ENDS
		END START


